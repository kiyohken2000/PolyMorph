# PolySlider - 多面体モーフィングアプリ 開発仕様書

## 概要
3D多面体をインタラクティブに表示し、スライダーで面数を4〜30面まで動的に変更できるモバイルアプリケーション。

## 背景
- 開発者は2020年以来毎年新作アプリをリリースしており、2024年も何か作りたい
- シンプルだが触っていて楽しい、教育的価値もあるアプリを目指す
- Google PlayストアとApp Storeの両方でリリース予定

## 主要機能

### MVP（最小限の実装）
1. **3D多面体の表示**
   - 画面中央に多面体を3D表示
   - 自動回転アニメーション（ゆっくりと回転）
   - MeshNormalMaterialでカラフルな表現（面ごとに異なる色）

2. **スライダーによる面数変更**
   - 4面体から30面体まで変更可能
   - リアルタイムで形状が変化
   - 現在の面数をテキスト表示（例: "12 faces"）

3. **ユーザーインタラクション**
   - タッチでぐりぐり回転できる
   - ピンチでズームイン/アウト（オプション）

### 面数と形状の対応
- 4面：正四面体（TetrahedronGeometry）
- 6面：立方体（BoxGeometry）  
- 8面：正八面体（OctahedronGeometry）
- 12面：正十二面体（DodecahedronGeometry）
- 20面：正二十面体（IcosahedronGeometry）
- 21-30面：細分化した多面体または球体の近似（SphereGeometry with segments）

## 技術スタック
- **フレームワーク**: React Native + Expo (SDK 54)
- **3Dグラフィックス**: Three.js + expo-gl
- **UIコンポーネント**: @react-native-community/slider
- **ビルド**: EAS Build

## 現在の課題
React Native Expo環境でThree.jsを使った3D描画の実装で以下の技術的問題が発生：

1. **@react-three/fiber使用時の問題**
   - `Cannot read property 'ReactCurrentOwner' of undefined`エラー
   - React Nativeとの互換性問題

2. **expo-glとThree.js直接使用時の問題**  
   - 多面体が描画されない
   - スライダーを動かしてもジオメトリが更新されない

3. **パッケージの互換性**
   - expo-gl-cppが廃止されている（Expo SDK 54）
   - Three.jsのバージョンによって動作が不安定

## UI レイアウト
```
┌─────────────────────────┐
│     12 faces            │  <- 面数表示
├─────────────────────────┤
│                         │
│                         │
│      [3D多面体]         │  <- GLView（3D描画エリア）
│                         │
│                         │
├─────────────────────────┤
│  4 [━━━━━●━━━━━] 30    │  <- スライダー
└─────────────────────────┘
```

## 審査対策
App Store/Google Play審査を通すための工夫：

1. **教育アプリとしての位置づけ**
   - 3D幾何学学習ツール
   - 各多面体の頂点数、辺数、面数を表示（将来的に追加）

2. **最小限の付加機能**
   - 設定画面
   - プライバシーポリシー
   - 簡単なチュートリアル
   - スクリーンショット保存機能

## コード要件
- スライダーの値（4-30）に応じてリアルタイムで3D形状を変更
- 滑らかなアニメーション（60fps目標）

## 参考情報
- シンプルで広告なしの教育アプリとして申請予定
- 類似アプリ例：「Poly - 3D Model Viewer」のような3Dビューワー
- ストレス解消や暇つぶしアプリとしての側面もある